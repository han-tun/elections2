---
title: "Tables"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Tables}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(elections2)
```

This package has three convenience functions to quickly make interactive HTML tables from election results. 

`quick_table()` takes the results of running `wrangle_results()` and turns it into table using the DT package. This table features colored bars in the winner and loser percent columns, as well as the ability to search by regular expressions. 

`quick_table_w_bargraphs()` gives an alternate table format for results from `wrangle_results()`, with a separate column for more robust bar graphs. This uses the reactable package and doesn't have regular expression capabilities.

Both of these functions handle only two election options: two candidates, "Yes" or "No" on a ballot question, etc.

The quick_table_more_cols() function can handle more than two ballot choices. It takes results from wrangle_more_cols() and creates an interactive table with the reactable package. It does not have color-coded results, but it does include sparkline bar graphs in each row for results when data is displayed as percentages.

### quick_table()

The resulting table's bar colors are set with the win_color and lose_color arguments, which default to purple and green:

```{r}
myfile <- system.file("extdata", "FakeElectionResults.xlsx", package = "elections2")
my_election_results <- wrangle_results(myfile)
quick_table(my_election_results, pagination = 5)


```

Turn off the bar colors by setting win_color and lose_color both to "none":

```{r}
quick_table(my_election_results, win_color = "none", lose_color = "none", pagination = 5)
```

Note I'm setting pagination to 5 to save space. It defaults to 20.

### quick_table_w_bargraphs() 

This function uses the reactable package to create a bargraphs in the far right percent margin and vote margin columns. The winner and loser columns also default to purple and green, and you can set them when with the function's win_color and lose_color arguments. The pagination argument sets how many rows appear on each page of the table.

```{r}
quick_table_w_bargraphs(my_election_results, pagination = 5, win_color  = "#c2a5cf", lose_color = "#a6dba0")
```

### quick_table_more_cols

This function takes three required arguments: the name of a data frame generated by `wrangle_more_cols()`, a vector with the names of all the columns containing vote choices, and whether the data needs a "pct" or "votes" format. There is also an optional pagination argument.

```{r}
myfile <- system.file("extdata", "Fake3Columns.xlsx", package = "elections2")
mydata <- wrangle_more_cols(myfile, c("Red", "Blue", "Green"), show_pcts = TRUE, show_runnerup = FALSE)
quick_table_more_cols(mydata, c("Red", "Blue", "Green"), num_format = "pct")
```

It can also generate tables with only two ballot choices. Note the absence of sparkline bar graphs because this graph has vote totals and not vote percents.


```{r}
myfile <- system.file("extdata", "MarkeyKennedyFramingham2020.xlsx", package = "elections2")
mydata <- wrangle_more_cols(myfile, c("Markey", "Kennedy"), show_pcts = FALSE, show_runnerup = FALSE)
quick_table_more_cols(mydata, c("Markey", "Kennedy"), num_format = "votes")
```





